rules:

- id: outdated-copyright-header
  languages: [generic]
  patterns:
  - pattern: |
      Copyright (c) $Y Aiven, Helsinki, Finland. https://aiven.io/
  - metavariable-regex:
      metavariable: $Y
      regex: ^(?!2018-2021)
  fix: |
      Copyright (c) 2018-2021 Aiven, Helsinki, Finland. https://aiven.io/
  message: |
    Aiven copyright message is outdated
  severity: WARNING

- id: go-file-missing-copyright-header
  languages: [generic]
  paths:
    include:
    - "aiven/*"
    - "pkg/*"
  patterns:
  - pattern-inside: |
      ...
      package $PACKAGE
  - pattern-not: |
      // Copyright (c) 2017 jelmersnoeck
      // Copyright (c) 2018-2021 Aiven, Helsinki, Finland. https://aiven.io/
      package $PACKAGE
  - pattern-not: |
      // Code generated by go generate; DO NOT EDIT.
      ...
      package $PACKAGE
  fix: |
      // Copyright (c) 2017 jelmersnoeck
      // Copyright (c) 2018-2021 Aiven, Helsinki, Finland. https://aiven.io/
      package $PACKAGE
  message: |
    Aiven copyright should be included in all go files
  severity: WARNING

- id: schema-resource-without-description
  languages: [go]
  paths:
    include:
    - "resource_*"
    - "datasource_*"
  patterns:
  - pattern: |
      &schema.Resource{ ... } 
  - pattern-not: |
      &schema.Resource{ ..., Description: ..., ... }
  - pattern-inside: |
      func $F() *schema.Resource { ... }
  message: |
    Each schema resource should have a description
  severity: WARNING

- id: schema-element-without-description
  languages: [go]
  paths:
    include:
    - "resource_*"
    - "datasource_*"
  patterns:
  - pattern-inside: |
      map[string]*schema.Schema{ ... }
  - pattern: |
      { ... }
  - pattern-not: |
      { ..., Description: ..., ... }
  message: |
    Each schema field should have a description
  severity: WARNING
