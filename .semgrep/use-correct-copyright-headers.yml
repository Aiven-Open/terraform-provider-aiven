# Rules to make sure that our copyright headers are up to date:

rules:
- id: outdated-copyright-header
  languages: [generic]
  patterns:
  - pattern: |
      Copyright (c) $Y Aiven, Helsinki, Finland. https://aiven.io/
  - metavariable-regex:
      metavariable: $Y
      regex: ^(?!2018-2021)
  fix: |
      Copyright (c) 2018-2021 Aiven, Helsinki, Finland. https://aiven.io/
  message: |
    Aiven copyright message is outdated
  severity: WARNING

- id: go-file-missing-copyright-header
  languages: [generic]
  paths:
    include:
    - "aiven/*"
    - "pkg/*"
  patterns:
  - pattern-inside: |
      ...
      package $PACKAGE
  - pattern-not: |
      // Copyright (c) 2017 jelmersnoeck
      // Copyright (c) 2018-2021 Aiven, Helsinki, Finland. https://aiven.io/
      package $PACKAGE
  - pattern-not: |
      // Code generated by go generate; DO NOT EDIT.
      ...
      package $PACKAGE
  fix: |
      // Copyright (c) 2017 jelmersnoeck
      // Copyright (c) 2018-2021 Aiven, Helsinki, Finland. https://aiven.io/
      package $PACKAGE
  message: |
    Aiven copyright should be included in all go files
  severity: WARNING

